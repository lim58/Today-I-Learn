# 병합과 충돌

이해?: 정리만함

**병합?** 분리된 브랜치를 한 브랜치로 합치는 작업

**깃으로 자동병합** 

원본을 기준으로 두 파일의 변경 이력을 비교, 변경된 파일 내용 발견시 수정된 코드 내용을 병합

깃의 병합은 브랜치를 기준으로 함

분리된 브랜치에서 수정된 사항을 하나의 브랜치로 병합함

---

## 1) 병합 방식

## ⏩ Fast-Forward 병합

혼자 개발할 때 브랜치가 생성된 커밋에 따라 순차적으로 분기

브랜치가 분기되지만 전체적으로 모든 변경사항은 순차적으로 진행함

**순차적 커밋에 맞추어 병합 처리하는 방법**

브랜치 경로가 일직선으로 한 개만 있음, 순차적으로 커밋해서 일직선으로 보이는 것

![0808_fmt.jpg](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/0808_fmt.jpg)

![316190.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316190.png)

📥 feature 브랜치의 커밋을 master 브랜치에 병합

원본 브랜치에 병합할 때 **작업한 브랜치의 시작 커밋을 원본 브랜치 이후의 커밋으로 가리킴**

## 🔂 3-way 병합

여러 개발자와 협업으로 작업하는 경우 사용

![316286.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316286.png)

![0817_fmt.jpg](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/0817_fmt.jpg)

master에 추가 커밋이 발생하면 7caf5f0을 기준으로 hotfix와 master 브랜치로 갈라짐

**기준 커밋에서 서로 다른 브랜치의 커밋과 연결됨**

![316340.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316340.png)

![316342.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316342.png)

👩‍🔧 두 브랜치를 병합하려면 먼저 분할 기준인 공통 커밋을 찾아야 함

**공통 조상 커밋을 포함하는 브랜치와 새로운 두 브랜치를 하나로 병합함**

**병합 커밋?** 병합을 성공적으로 완료한 후 새로운 생성된 커밋

---

## 2) 충돌

충돌이 생기는 상황? ****대부분 충돌 원인 같은 위치의 코드를 동시에 수정했기 때문

`**Mearge Conficts 메세지 출력**`

**병합 충돌이 발생하면 자동으로 커밋이 생성되지 않음**

충돌 발생 시 충돌 메세지를 출력하고 병합 작업을 중단함

![0827_fmt.jpg](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/0827_fmt.jpg)

![316494.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316494.png)

충돌은 두 부분으로 표시 (기준이 되는 브랜치 / 병합하고자 하는 브랜치)

내용을 수정 할때는 깃에서 표시한 충돌 기호도 같이 삭제해야 함

---

## 3) 리베이스

**커밋 순서를 재배열하는 리베이스 병합**

**베이스?** 브랜치가 파생되는 커밋 (공통조상 커밋)

**리베이스?** 파생된 브랜치의 기준이 되는 베이스 커밋을 변경하여 병합

![316628.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316628.png)

리베이스는 코드의 베이스 분기점을 변경하여 하나의 기찻길처럼 만듬

여러 갈래로 갈라지지 않아 커밋 진행 사항을 쉽게 파악할 수 있음

**리베이스는 두 브랜치를 서로 비교하지 않고 순차적으로 커밋 병합을 시도함**

![316666.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316666.png)

공통 조상 커밋을 찾음

베이스 커밋을 변경하여 두 브랜치의 위치를 바꿈

파생된 브랜치를 임시 공간에 보관했다가 변경하는 기준 브랜치의 마지막 커밋에서 차례로 적용

**리베이스는 병합되는 브랜치 방향이 반대**

![316726.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316726.png)

파생된 브랜치의 **커밋들은 기준 브랜치의 마지막 커밋으로 재정렬**

베이스 커밋을 변경하는 과정에서 커밋들은 재배치 작업을 함 **(커밋의 해시 값이 변경됨)**

![316740.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316740.png)

![316787.png](%E1%84%87%E1%85%A7%E1%86%BC%E1%84%92%E1%85%A1%E1%86%B8%E1%84%80%E1%85%AA%20%E1%84%8E%E1%85%AE%E1%86%BC%E1%84%83%E1%85%A9%E1%86%AF%209a61de9132c04579b967c8563370f480/316787.png)

**리베이스는 커밋 위치를 재조정할 뿐 브랜치의 HEAD 포인터까지 옮기지 않음**

HEAD 값을 일치시켜야함, 리베이스된 브랜치를 병합해야함