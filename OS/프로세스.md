# 프로세스

## 1. 프로세스

<aside>
🔥 실행 중인 프로그램

프로세서가 할당된 개체

디스패치가 가능한 단위

프로세서가 활동 중인 것

프로세스 제어 블록 (PCB) 이 명백히 존재하는 것

비동기적 행위

</aside>

## 2. 프로세스의 상태

![스크린샷 2024-04-25 오후 3.35.01.png](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%20d00be987e9ff48e18b49cfe678d7846c/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-04-25_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.35.01.png)

1. **생성 ⇒ 준비 (Admin)**
    
    새로운 프로세스가 만들어져서 생성 상태로 들어가면, 시스템이 가질 수 있는 제한된 준비 프로세스의 수를 고려하여 준비 상태로 이동 되며, 상태 전이는 작업 스케줄러가 담당
    
2. **준비 ⇒ 실행 (Dispatch)**
    
    준비 상태에 있는 프로세스 중에서 어느 한 프로세스를 선택하여 CPU를 사용할 수 있도록 하는 것으로 상태 전이는 프로세스 스케줄러가 담당
    
3. **실행 ⇒ 준비 (Timeout)**
    
    CPU를 할당받아 실행중인 프로세스는 CPU의 제한된 할당 시간을 모두 쓴 경우에 다른 프로세스가 CPU를 할당받을 수 있도록 하기 위해서 준비상태로 전이됨
    
4. **실행 ⇒ 대기 (Block)**
    
    실행 중인 프로세스가 CPU에 할당된 규정시간을 모두 사용하기 전에 입출력 요구나 또 다른 자원의 요구 등, CPU 작업이 아닌 어떤 다른 사건을 요구하게 되면 대기상태로 전이
    
5. **대기 ⇒ 준비 (Wake up)**
    
    대기의 원인이 되었던 해당 사건 처리가 완료 되었다는 신호를 받을 때 준비 상태로 전이
    
6. **실행 ⇒ 완료 (Release)**
    
    실행 중인 프로세스가 정상 종료되거나 비정상적으로 종료 될 것이 결정되었을 때 종료 상태로 전이
    

### 프로세스의 상태

프로세스 → 자원 간의 상호작용에 의해 결정

**Active (swapped-in) 메모리 안**

- Running → 프로세서 O
- Ready → 프로세서 X, 기타 자원 O
- Blocked, asleep → 프로세서 X, 기타 자원 X

**Suspended** **(swapped-out) 메모리 밖**

- Suspended ready → 프로세서 X
- Suspended block → 프로세서 X, 기타 자원 X

## 3. 문맥교환 Context Switching

Context? 프로세스와 관련된 정보들의 집합

Context saving → 현재 프로세스의 Register context를 저장하는 작업

Context restoring → Register context를 프로세스로 복구하는 작업

### Context Switching

실행 중인 프로세스의 context를 저장하고 앞으로 실행 할 프로세스의 context를 복구하는 일

커널의 개입으로 이루어짐

오버헤드 → 문맥 교환에 소요되는 비용

## 4. 스레드 Threads

1. 프로세스보다 더 작은 단위로 입출력 장치와 같은 자원 할당에는 관계하지 않고 
단지 프로세스 스케줄링의 단위로 사용
2. 자원을 제어하는 개체
3. 자원을 공유하므로 하나의 프로세스 안에 여러 개의 스레드 존재 가능

Light Weight Process (LWP)

프로세서 활용의 기본 단위

구성요소) Thread ID, Register set, Stack

- 제어 요소 외 코드, 데이터 및 자원들은 프로세스 내 다른 스레드들과 공유
- 전통적 프로세스 = 단일 스레드 프로세스

| 구분 | 프로세스 (Process) | 스레드 (Threads) |
| --- | --- | --- |
| 실행점 | CPU가 하나인 시스템에서는 하나의 프로세스만 실행되므로 실행점 하나 | CPU가 하나인 시스템에서 실행 중인 프로세스에는 여러 개의 스레드가 존재하므로 실행점 여러 개 |
| 병행성 | CPU가 하나인 시스템에서는 순차적으로 실행 | CPU가 하나인 시스템에서도 병행 실행 가능 |
| 장단점 | - 안전성 : 다른 프로세스의 영향을 안받으므로 안전성 우수 (독립적)

- 속도와 자원 : 코드, 데이터, 힙, 스택 영역을 전부 따로 소유
소통은 IPC로만 해야해서 오버헤드 크고 속도 느림 | - 안전성 : 해당 프로세스에 문제가 생기면 그 안의 모든 스레드에 문제 발생

- 속도와 자원 : 스택 영역 제외한 영역은 모두 공유 하므로 오버헤드가 적음
스레드 간 통신은 데이터 공유로 쉽게 가능하지만 공유되는 공간에서 문제 발생 가능   → 동기화 알고리즘으로 해결 |

### 스레드 장점

1. 사용자 응답성 - 일부 스레드의 처리가 지연되어도 다른 스레드는 작업을 계속 처리 가능
2. 자원 공유 - 자원을 공유해서 효율성 증가
3. 경제성 - 프로세스의 생성, 문맥교환에 비해 효율적
4. 멀티 프로세서 활용 - 병렬처리를 통해 성능 향상

**스레드의 구현**

### **사용자 수준 스레드**

- 사용자 영역의 스레드 라이브러리로 구현됨
- 커널은 스레드의 존재를 모름

### 커널 수준 스레드

- OS가 직접 관리
- 커널 영역에서 스레드의 생성, 관리 수행
- 커널이 각 스레드를 개별적으로 관리

### 혼합형 (n : m) 스레드

- n개 사용자 수준 스레드 - m개의 커널 스레드
- 효율적이면서도 유연함